= GraphQL API Documentation
:toc: macro
:toclevels: 2

This documentation describes all static GraphQL types

toc::[]

== Common arguments

|===
|Name | Remark | Default value

|key
|Designs a content path or content ID
|

|offset
|Designs a content path or content ID
|0

|first
|Number of content to fetch
|10

|sort
|Sorting expression
|"_score DESC"
|===

== Object Types
=== Query 

==== Fields
|===
|Name(Arguments):Type | Description

|content: <<ContentAPI>>
|Type gathering all content retrieval requests
|===

=== ContentAPI 

Type gathering all content retrieval requests. 

==== Remarks

* Most requests expect a key as argument. If the key is not specified, then the matched content will be the one corresponding to the current execution context

==== Fields

|===
|Name(Arguments):Type | Description

|get(key: ID): <<Content>>
|Fetches a content

|getChildren(
 key: ID,
 offset: Int,
 first: Int,
 sort: String
 ): [<<Content>>]
|Fetches the children of a content

|getChildrenConnection(
 key: ID,
 after: String,
 first: Int,
 sort: String
 ): <<ContentConnection>>
| Fetches the children of a content and return the result as a connection

|getPermissions(key: ID): <<Permissions>>
|Fetches the permissions on a content

|getSite: portal_Site
|Fetches the parent site of the content corresponding to the current execution context

|query(
 query: String,
 offset: Int,
 first: Int,
 sort: String,
 contentTypes: [String]
 ): [<<Content>>]
|Queries contents

|queryConnection(
 query: String!,
 after: String,
 first: Int,
 sort: String,
 contentTypes: [String]
 ): <<ContentConnection>>
|Queries contents and returns the result as a connection

|getType(name: String!): <<ContentType>>
|Retrieves the properties and icon of the specified content type

|getTypes: [<<ContentType>>]
|Retrieves the list of all content types available for the current site
|===

=== Content
Abstract type of all contents.

==== Fields
|===
|Name(Arguments):Type | Description

|_id: ID!
|

|_name: String!
|

|_path: String!
|

|creator: <<PrincipalKey>>
|

|modifier: <<PrincipalKey>>
|

|createdTime: String
|

|modifiedTime: String
|

|owner: <<PrincipalKey>>
|

|type: String
|

|displayName: String
|

|hasChildren: Boolean
|

|language: String
|

|valid: Boolean
|

|x: [<<ExtraData>>]
|

|page: <<Page>>
|

|attachments: [<<Attachment>>]
|

|publish: <<PublishInfo>>
|

|pageUrl(type: UrlTypeTypeparams: String): String
|

|site: portal_Site
|

|parent: <<Content>>
|

|children(
offset: Int
first: Int
sort: String
): [<<Content>>]
|

|childrenConnection(
after: String
first: Int
sort: String
): <<ContentConnection>>
|

|permissions: <<Permissions>>
|
|===

==== Direct Known Subtypes

Direct Known Subtypes: 
portal_Site
, base_Folder
, media_Code
, media_Executable
, media_Text
, media_Vector
, media_Spreadsheet
, media_Data
, base_Structured
, base_Shortcut
, base_Media
, media_Document
, media_Video
, media_Presentation
, media_Archive
, media_Audio
, portal_PageTemplate
, media_Unknown
, portal_TemplateFolder
, media_Image
, base_Unstructured
, portal_Fragment

=== ContentConnection

To ease the pagination of relationship to a content, the type ContentConnection has been created to represent this connection.
It allows you to :

* Paginate through the list.
* Ask for information about the connection itself, like totalCount or pageInfo.
* Ask for information about the edge itself, like cursor.

==== Fields

|===
|Name(Arguments):Type | Description

|totalCount: Int!
|

|edges: [<<ContentEdge>>]
|

|pageInfo: <<PageInfo>>
|

|===

=== ContentEdge

==== Fields

|===
|Name(Arguments):Type | Description

|node: <<Content>>!
|

|cursor: String!
|

|===

=== PageInfo

==== Fields

|===
|Name(Arguments):Type | Description

|startCursor: String!
|

|endCursor: String!
|

|hasNext: Boolean!
|

|===

=== Permissions

==== Fields

|===
|Name(Arguments):Type | Description

|inheritsPermissions: Boolean
|

|permissions: [<<AccessControlEntry>>]
|

|===

=== AccessControlEntry

==== Fields

|===
|Name(Arguments):Type | Description

|principal: <<PrincipalKey>>
|

|allow: [<<Permission>>]
|

|deny: [<<Permission>>]
|

|===

=== PrincipalKey

==== Fields

|===
|Name(Arguments):Type | Description

|value: String
|

|type: <<PrincipalType>>
|

|userStore: String
|

|principalId: String
|

|===

=== ContentType

==== Fields

|===
|Name(Arguments):Type | Description

|name: String
|

|displayName: String
|

|description: String
|

|superType: String
|

|abstract: Boolean
|

|final: Boolean
|

|allowChildContent: Boolean
|

|contentDisplayNameScript: String
|

|icon: Icon
|

|form: [<<FormItem>>]
|

|getInstances(
offset: Int
, first: Int
, query: String
, sort: String
): [<<Content>>]
|

|getInstanceConnection(
after: String
, first: Int
, query: String
, sort: String
): <<ContentConnection>>
|

|===

=== FormItem

==== Fields

|===
|Name(Arguments):Type | Description

|formItemType: <<FormItemType>>
|

|name: String
|

|label: String
|

|===

==== Direct Known Subtypes

Direct Known Subtypes: FormInput
, FormOptionSet
, FormLayout
, FormItemSet

=== ExtraData

==== Fields

|===
|Name(Arguments):Type | Description

|name: String
|

|data: String
|

|===

=== Page

==== Fields

|===
|Name(Arguments):Type | Description

|template: String
|

|controller: String
|

|config: String
|

|regions: [<<Region>>]
|

|fragment: <<Component>>
|

|===

=== Region

==== Fields

|===
|Name(Arguments):Type | Description

|name: String
|

|components: [<<Component>>]
|

|===

=== Component

==== Fields

|===
|Name(Arguments):Type | Description

|name: String
|

|path: String
|

|type: String
|

|descriptor: String
|

|text: String
|

|fragment: String
|

|config: String
|

|regions: [<<Region>>]
|

|===

=== Attachment

==== Fields

|===
|Name(Arguments):Type | Description

|name: String
|

|label: String
|

|size: Int
|

|mimeType: String
|

|===

=== PublishInfo

==== Fields

|===
|Name(Arguments):Type | Description

|from: String
|

|to: String
|

|first: String
|

|===

=== Icon

==== Fields

|===
|Name(Arguments):Type | Description

|mimeType: String
|

|modifiedTime: String
|

|===

== Enum Types

=== PrincipalType

Enum values: user
, group
, role

=== Permission

Enum values: READ
, CREATE
, MODIFY
, DELETE
, PUBLISH
, READ_PERMISSIONS
, WRITE_PERMISSIONS

=== FormItemType

Enum values: ItemSet
, Layout
, Input
, OptionSet